var dashboardString;
var dashboardStringJson;
var dasboardJson;

//Dashboard scatterplot (Velocidade x Potência)
dashboardString = "{\"$schema\":\"https:\/\/vega.github.io\/schema\/vega\/v5.json\",\"description\":\"A basic scatter plot example depicting automobile statistics.\",\"width\":500,\"height\":200,\"padding\":5,\"data\":[{\"name\":\"source\",\"values\":[{\"Speed\":130,\"timestampSpeed\":\"17\/07\/2020, 17:48:00\",\"outputPower\":18,\"timestampoutputPower\":\"17\/07\/2020, 17:48:00\"},{\"Speed\":165,\"timestampSpeed\":\"17\/07\/2020, 17:48:00\",\"outputPower\":15,\"timestampoutputPower\":\"17\/07\/2020, 17:48:00\"}],\"transform\":[{\"type\":\"filter\",\"expr\":\"datum['Speed'] != null && datum['outputPower'] != null && datum['timestampoutputPower'] != null\"}]}],\"scales\":[{\"name\":\"x\",\"type\":\"linear\",\"round\":true,\"nice\":true,\"zero\":true,\"domain\":{\"data\":\"source\",\"field\":\"Speed\"},\"range\":\"width\"},{\"name\":\"y\",\"type\":\"linear\",\"round\":true,\"nice\":true,\"zero\":true,\"domain\":{\"data\":\"source\",\"field\":\"outputPower\"},\"range\":\"height\"},{\"name\":\"size\",\"type\":\"linear\",\"round\":true,\"nice\":false,\"zero\":true,\"domain\":{\"data\":\"source\",\"field\":\"timestampoutputPower\"},\"range\":[4,361]}],\"axes\":[{\"scale\":\"x\",\"grid\":true,\"domain\":false,\"orient\":\"bottom\",\"tickCount\":5,\"title\":\"rpm\",\"titleFontWeight\":\"normal\"},{\"scale\":\"y\",\"grid\":true,\"domain\":false,\"orient\":\"left\",\"titlePadding\":5,\"title\":\"kW\",\"titleFontWeight\":\"normal\"}],\"marks\":[{\"name\":\"marks\",\"type\":\"symbol\",\"from\":{\"data\":\"source\"},\"encode\":{\"update\":{\"x\":{\"scale\":\"x\",\"field\":\"Speed\"},\"y\":{\"scale\":\"y\",\"field\":\"outputPower\"},\"size\":{\"scale\":\"size\",\"field\":\"Acceleration\"},\"shape\":{\"value\":\"circle\"},\"strokeWidth\":{\"value\":4},\"opacity\":{\"value\":3},\"stroke\":{\"value\":\"#057180\"},\"fill\":{\"value\":\"transparent\"},\"tooltip\":{\"signal\":\"{'Data': datum.timestampSpeed, 'Velocidade': datum.Speed + ' rpm', 'Pot\u00eancia': datum.outputPower+ ' kW'}\"}}}}]}";
//Dashboard scatterplot (Potência x Temperatura)
dashboardString = "{\"$schema\":\"https:\/\/vega.github.io\/schema\/vega\/v5.json\",\"description\":\"A scatter plot example with interactive legend and x-axis.\",\"width\":300,\"height\":250,\"padding\":5,\"autosize\":\"pad\",\"signals\":[{\"name\":\"clear\",\"value\":true,\"on\":[{\"events\":\"mouseup[!event.item]\",\"update\":\"true\",\"force\":true}]},{\"name\":\"shift\",\"value\":false,\"on\":[{\"events\":\"@legendSymbol:click, @legendLabel:click\",\"update\":\"event.shiftKey\",\"force\":true}]},{\"name\":\"clicked\",\"value\":null,\"on\":[{\"events\":\"@legendSymbol:click, @legendLabel:click\",\"update\":\"{value: datum.value}\",\"force\":true}]},{\"name\":\"brush\",\"value\":0,\"on\":[{\"events\":{\"signal\":\"clear\"},\"update\":\"clear ? [0, 0] : brush\"},{\"events\":\"@xaxis:mousedown\",\"update\":\"[x(), x()]\"},{\"events\":\"[@xaxis:mousedown, window:mouseup] > window:mousemove!\",\"update\":\"[brush[0], clamp(x(), 0, width)]\"},{\"events\":{\"signal\":\"delta\"},\"update\":\"clampRange([anchor[0] + delta, anchor[1] + delta], 0, width)\"}]},{\"name\":\"anchor\",\"value\":null,\"on\":[{\"events\":\"@brush:mousedown\",\"update\":\"slice(brush)\"}]},{\"name\":\"xdown\",\"value\":0,\"on\":[{\"events\":\"@brush:mousedown\",\"update\":\"x()\"}]},{\"name\":\"delta\",\"value\":0,\"on\":[{\"events\":\"[@brush:mousedown, window:mouseup] > window:mousemove!\",\"update\":\"x() - xdown\"}]},{\"name\":\"domain\",\"on\":[{\"events\":{\"signal\":\"brush\"},\"update\":\"span(brush) ? invert('x', brush) : null\"}]}],\"data\":[{\"name\":\"source\",\"values\":[{\"date\":\"23\/07\/2020, 19:00\",\"local\":\"IGBT-U\",\"temperature\":10,\"outputPower\":0},{\"date\":\"25\/07\/2020, 19:00\",\"local\":\"IGBT-V\",\"temperature\":2,\"outputPower\":0},{\"date\":\"27\/07\/2020, 19:00\",\"local\":\"IGBT-W\",\"temperature\":30,\"outputPower\":0},{\"date\":\"28\/07\/2020, 19:00\",\"local\":\"Retificador\",\"temperature\":300,\"outputPower\":0},{\"date\":\"29\/07\/2020, 19:00\",\"local\":\"Ar Interno\",\"temperature\":370,\"outputPower\":0}],\"transform\":[{\"type\":\"filter\",\"expr\":\"datum['temperature'] != null && datum['outputPower'] != null && datum['local'] != null\"}]},{\"name\":\"selected\",\"on\":[{\"trigger\":\"clear\",\"remove\":true},{\"trigger\":\"!shift\",\"remove\":true},{\"trigger\":\"!shift && clicked\",\"insert\":\"clicked\"},{\"trigger\":\"shift && clicked\",\"toggle\":\"clicked\"}]}],\"scales\":[{\"name\":\"x\",\"type\":\"linear\",\"round\":true,\"nice\":true,\"zero\":true,\"domain\":{\"data\":\"source\",\"field\":\"outputPower\"},\"range\":\"width\"},{\"name\":\"y\",\"type\":\"linear\",\"round\":true,\"nice\":true,\"zero\":true,\"domain\":{\"data\":\"source\",\"field\":\"temperature\"},\"range\":\"height\"},{\"name\":\"color\",\"type\":\"ordinal\",\"range\":{\"scheme\":\"category10\"},\"domain\":{\"data\":\"source\",\"field\":\"local\"}}],\"axes\":[{\"scale\":\"x\",\"grid\":true,\"domain\":false,\"orient\":\"bottom\",\"tickCount\":5,\"title\":\"kW\",\"titleFontWeight\":\"normal\"},{\"scale\":\"y\",\"grid\":true,\"domain\":false,\"orient\":\"left\",\"titlePadding\":5,\"title\":\"\u00baC\",\"titleFontWeight\":\"normal\"}],\"legends\":[{\"stroke\":\"color\",\"title\":\"Pot\u00eancia x Temperatura\",\"encode\":{\"symbols\":{\"name\":\"legendSymbol\",\"interactive\":true,\"update\":{\"fill\":{\"value\":\"transparent\"},\"strokeWidth\":{\"value\":2},\"opacity\":[{\"test\":\"!length(data('selected')) || indata('selected', 'value', datum.value)\",\"value\":0.7},{\"value\":0.15}],\"size\":{\"value\":64}}},\"labels\":{\"name\":\"legendLabel\",\"interactive\":true,\"update\":{\"opacity\":[{\"test\":\"!length(data('selected')) || indata('selected', 'value', datum.value)\",\"value\":1},{\"value\":0.25}]}}}}],\"marks\":[{\"type\":\"rect\",\"name\":\"xaxis\",\"interactive\":true,\"encode\":{\"enter\":{\"x\":{\"value\":0},\"height\":{\"value\":35},\"fill\":{\"value\":\"transparent\"},\"cursor\":{\"value\":\"ew-resize\"}},\"update\":{\"y\":{\"signal\":\"height\"},\"width\":{\"signal\":\"span(range('x'))\"}}}},{\"type\":\"rect\",\"interactive\":false,\"encode\":{\"enter\":{\"y\":{\"value\":0},\"height\":{\"signal\":\"height\"},\"fill\":{\"value\":\"#ddd\"}},\"update\":{\"x\":{\"signal\":\"brush[0]\"},\"x2\":{\"signal\":\"brush[1]\"},\"fillOpacity\":{\"signal\":\"domain ? 0.2 : 0\"}}}},{\"name\":\"marks\",\"type\":\"symbol\",\"from\":{\"data\":\"source\"},\"interactive\":true,\"encode\":{\"update\":{\"tooltip\":{\"signal\":\"{'Data': datum.date, 'Local': datum.local, 'Temperatura': datum.temperature + ' \u00baC', 'Pot\u00eancia': datum.outputPower + ' kW'}\"},\"x\":{\"scale\":\"x\",\"field\":\"outputPower\"},\"y\":{\"scale\":\"y\",\"field\":\"temperature\"},\"shape\":{\"value\":\"circle\"},\"strokeWidth\":{\"value\":2},\"opacity\":[{\"test\":\"(!domain || inrange(datum.outputPower, domain)) && (!length(data('selected')) || indata('selected', 'value', datum.local))\",\"value\":0.7},{\"value\":0.15}],\"stroke\":[{\"test\":\"(!domain || inrange(datum.outputPower, domain)) && (!length(data('selected')) || indata('selected', 'value', datum.local))\",\"scale\":\"color\",\"field\":\"local\"},{\"value\":\"#ccc\"}],\"fill\":{\"value\":\"transparent\"}}}},{\"type\":\"rect\",\"name\":\"brush\",\"encode\":{\"enter\":{\"y\":{\"value\":0},\"height\":{\"signal\":\"height\"},\"fill\":{\"value\":\"transparent\"}},\"update\":{\"x\":{\"signal\":\"brush[0]\"},\"x2\":{\"signal\":\"brush[1]\"}}}},{\"type\":\"rect\",\"interactive\":false,\"encode\":{\"enter\":{\"y\":{\"value\":0},\"height\":{\"signal\":\"height\"},\"width\":{\"value\":1},\"fill\":{\"value\":\"firebrick\"}},\"update\":{\"fillOpacity\":{\"signal\":\"domain ? 1 : 0\"},\"x\":{\"signal\":\"brush[0]\"}}}},{\"type\":\"rect\",\"interactive\":false,\"encode\":{\"enter\":{\"y\":{\"value\":0},\"height\":{\"signal\":\"height\"},\"width\":{\"value\":1},\"fill\":{\"value\":\"firebrick\"}},\"update\":{\"fillOpacity\":{\"signal\":\"domain ? 1 : 0\"},\"x\":{\"signal\":\"brush[1]\"}}}}]}";
//Dashboard gráfico de barras (Tempo de operação x Tempo)
dashboardString = "{\"$schema\":\"https:\/\/vega.github.io\/schema\/vega\/v5.json\",\"description\":\"A basic bar chart example, with value labels shown upon mouse hover.\",\"width\":600,\"height\":400,\"padding\":5,\"data\":[{\"name\":\"table\",\"values\":[{\"date\":\"20\/07\/2020, 14:00\",\"value\":28},{\"date\":\"21\/07\/2020, 14:00\",\"value\":55},{\"date\":\"22\/07\/2020, 14:00\",\"value\":43},{\"date\":\"23\/07\/2020, 14:00\",\"value\":60},{\"date\":\"24\/07\/2020, 14:00\",\"value\":60},{\"date\":\"25\/07\/2020, 14:00\",\"value\":53},{\"date\":\"26\/07\/2020, 14:00\",\"value\":19},{\"date\":\"27\/07\/2020, 14:00\",\"value\":60},{\"date\":\"28\/07\/2020, 14:00\",\"value\":28},{\"date\":\"29\/07\/2020, 14:00\",\"value\":55},{\"date\":\"30\/07\/2020, 14:00\",\"value\":43},{\"date\":\"31\/07\/2020, 14:00\",\"value\":60},{\"date\":\"32\/07\/2020, 14:00\",\"value\":60},{\"date\":\"33\/07\/2020, 14:00\",\"value\":53},{\"date\":\"34\/07\/2020, 14:00\",\"value\":19},{\"date\":\"35\/07\/2020, 14:00\",\"amount\":60}]}],\"scales\":[{\"name\":\"xscale\",\"type\":\"band\",\"domain\":{\"data\":\"table\",\"field\":\"date\"},\"range\":\"width\",\"padding\":0.08},{\"name\":\"yscale\",\"domain\":{\"data\":\"table\",\"field\":\"value\"},\"range\":\"height\"}],\"axes\":[{\"orient\":\"bottom\",\"scale\":\"xscale\",\"labelAngle\":-45,\"labelAlign\":\"right\",\"grid\":false},{\"orient\":\"left\",\"scale\":\"yscale\",\"grid\":true,\"title\":\"Minutos\",\"titlePadding\":5,\"titleFontWeight\":\"normal\"}],\"marks\":[{\"type\":\"rect\",\"from\":{\"data\":\"table\"},\"encode\":{\"enter\":{\"x\":{\"scale\":\"xscale\",\"field\":\"date\"},\"width\":{\"scale\":\"xscale\",\"band\":1},\"y\":{\"scale\":\"yscale\",\"field\":\"value\"},\"y2\":{\"scale\":\"yscale\",\"value\":0}},\"update\":{\"tooltip\":{\"signal\":\"{'Data': datum.date, 'Tempo de Opera\u00e7\u00e3o': datum.value + ''}\"},\"fill\":{\"value\":\"#00579D\"}},\"hover\":{\"fill\":{\"value\":\"#00679D\"}}}},{\"type\":\"text\",\"encode\":{\"enter\":{\"align\":{\"value\":\"center\"},\"baseline\":{\"value\":\"bottom\"},\"fill\":{\"value\":\"#333\"}}}}]}";
//Dashboard gráfico de linha (Dias do Lote x Índice de conversão alimentar)
dashboardString = "{\"$schema\":\"https:\/\/vega.github.io\/schema\/vega\/v5.json\",\"description\":\"A basic line chart example.\",\"width\":500,\"height\":200,\"padding\":5,\"signals\":[{\"name\":\"interpolate\",\"value\":\"monotone\"}],\"data\":[{\"name\":\"table\",\"values\":[{\"date\":\"28\/07\/2020, 17:25\",\"x\":1,\"y\":28,\"c\":0},{\"date\":\"28\/07\/2020, 17:25\",\"x\":6,\"y\":28,\"c\":0},{\"date\":\"28\/07\/2020, 17:25\",\"x\":7,\"y\":43,\"c\":0},{\"date\":\"28\/07\/2020, 17:25\",\"x\":8,\"y\":81,\"c\":0},{\"date\":\"28\/07\/2020, 17:25\",\"x\":8,\"y\":81,\"c\":0},{\"date\":\"28\/07\/2020, 17:25\",\"x\":20,\"y\":19,\"c\":0}]}],\"scales\":[{\"name\":\"x\",\"type\":\"linear\",\"range\":\"width\",\"nice\":false,\"zero\":false,\"domain\":{\"data\":\"table\",\"field\":\"x\"}},{\"name\":\"y\",\"type\":\"linear\",\"range\":\"height\",\"nice\":true,\"zero\":false,\"domain\":{\"data\":\"table\",\"field\":\"y\"}},{\"name\":\"color\",\"type\":\"ordinal\",\"range\":\"category\",\"domain\":{\"data\":\"table\",\"field\":\"c\"}}],\"axes\":[{\"orient\":\"bottom\",\"scale\":\"x\",\"title\":\"Dia do Lote\",\"titleFontWeight\":\"normal\",\"grid\":true,\"tickMinStep\":1,\"tickCount\":1001},{\"orient\":\"left\",\"scale\":\"y\",\"title\":\"Convers\u00e3o alimentar\",\"titleFontWeight\":\"normal\",\"grid\":true}],\"marks\":[{\"type\":\"group\",\"from\":{\"facet\":{\"name\":\"series\",\"data\":\"table\",\"groupby\":\"c\"}},\"marks\":[{\"type\":\"line\",\"from\":{\"data\":\"series\"},\"encode\":{\"enter\":{\"x\":{\"scale\":\"x\",\"field\":\"x\"},\"y\":{\"scale\":\"y\",\"field\":\"y\"},\"stroke\":{\"scale\":\"color\",\"field\":\"c\"},\"strokeWidth\":{\"value\":2}},\"update\":{\"tooltip\":{\"signal\":\"datum\"},\"interpolate\":{\"signal\":\"interpolate\"},\"strokeOpacity\":{\"value\":1}},\"hover\":{\"strokeOpacity\":{\"value\":0.5}}}},{\"type\":\"symbol\",\"from\":{\"data\":\"series\"},\"encode\":{\"enter\":{\"x\":{\"scale\":\"x\",\"field\":\"x\"},\"y\":{\"scale\":\"y\",\"field\":\"y\"},\"stroke\":{\"scale\":\"color\",\"field\":\"c\"},\"strokeWidth\":{\"value\":0.1},\"fill\":{\"value\":\"steelblue\"}},\"update\":{\"tooltip\":{\"signal\":\"{'Data': datum.date, 'Dia do lote': datum.x, 'KPI': datum.y}\"},\"interpolate\":{\"signal\":\"interpolate\"},\"strokeOpacity\":{\"value\":1}},\"hover\":{\"strokeOpacity\":{\"value\":0.5}}}}]}]}";

dashboardStringJson = JSON.stringify(dashboardString);
dasboardJson = JSON.parse(dashboardStringJson);
console.log(dasboardJson);